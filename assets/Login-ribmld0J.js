import{f as L,r as a,j as e,e as j,G as I,b as S,h as k,i as v,d as E,k as h,F as z,H as C,B as R,l as m,m as x,n as B,p as F,L as f,T as M,Q as N}from"./index-igr5BrDM.js";import{I as O}from"./index-vil9ThEs.js";import{S as p}from"./chunk-ZHMYA64R-UO2GOftq.js";import{F as g}from"./chunk-H46NUPBZ-Y3HOxHsC.js";var y=L((o,n)=>{const{icon:i,children:t,isRound:c,"aria-label":u,...d}=o,l=i||t,s=a.isValidElement(l)?a.cloneElement(l,{"aria-hidden":!0,focusable:!1}):null;return e.jsx(j,{padding:"0",borderRadius:c?"full":void 0,ref:n,"aria-label":u,...d,children:s})});y.displayName="IconButton";function P(o){return I({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448zM248 315.85l-51.79-51.79a2 2 0 0 0-3.39 1.69 64.11 64.11 0 0 0 53.49 53.49 2 2 0 0 0 1.69-3.39zm16-119.7L315.87 248a2 2 0 0 0 3.4-1.69 64.13 64.13 0 0 0-53.55-53.55 2 2 0 0 0-1.72 3.39z"},child:[]},{tag:"path",attr:{d:"M491 273.36a32.2 32.2 0 0 0-.1-34.76c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.68 96a226.54 226.54 0 0 0-71.82 11.79 4 4 0 0 0-1.56 6.63l47.24 47.24a4 4 0 0 0 3.82 1.05 96 96 0 0 1 116 116 4 4 0 0 0 1.05 3.81l67.95 68a4 4 0 0 0 5.4.24 343.81 343.81 0 0 0 67.24-77.4zM256 352a96 96 0 0 1-93.3-118.63 4 4 0 0 0-1.05-3.81l-66.84-66.87a4 4 0 0 0-5.41-.23c-24.39 20.81-47 46.13-67.67 75.72a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.39 76.14 98.28 100.65C162.06 402 207.92 416 255.68 416a238.22 238.22 0 0 0 72.64-11.55 4 4 0 0 0 1.61-6.64l-47.47-47.46a4 4 0 0 0-3.81-1.05A96 96 0 0 1 256 352z"},child:[]}]})(o)}const D=()=>{const[o,n]=a.useState({code:null,error:null}),[i,t]=a.useState(!1),{dispatch:c}=S();return{login:async(d,l)=>{t(!0),n(null);const s=await fetch(k+"/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:l})}),r=await s.json();console.log(r),s.ok||(n({code:s.status,error:r.resp}),t(!1)),s.ok&&(n({code:s.status,error:r.resp}),t(!1),document.cookie=`user=${JSON.stringify(r)}`,c({type:"LOGIN",payload:r}))},error:o,loading:i}},H=()=>{const[o,n]=a.useState(!1),i=a.useRef(),t=a.useRef(),c=v();console.log("url "+c);const u=()=>{n(!o)},d=E(),{login:l,error:s,loading:r}=D();a.useEffect(()=>{s&&(s.code===400&&h(s.error,{type:"error"}),s.code===200&&(h(s.error,{type:"success"}),d("/")))},[s]);const b=async w=>{w.preventDefault(),await l(i.current.value,t.current.value)};return e.jsxs(z,{alignItems:"center",justifyContent:"center",minH:"100vh",children:[e.jsxs(p,{style:{border:"1px solid black"},p:5,my:5,rounded:6,minW:"300px",w:"30%",children:[e.jsx(p,{children:e.jsx(C,{children:"Welcome back"})}),e.jsxs(R,{children:[e.jsx("form",{onSubmit:b,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx(g,{children:"Email"}),e.jsx(x,{type:"email",ref:i,placeholder:"example@gmail.com"})]}),e.jsxs(m,{children:[e.jsx(g,{children:"Password"}),e.jsxs(B,{children:[e.jsx(x,{type:o?"text":"password",placeholder:"password",ref:t}),e.jsx(F,{children:e.jsx(y,{size:"sm",icon:o?e.jsx(O,{size:20}):e.jsx(P,{size:20}),onClick:u})})]})]}),e.jsx(f,{style:{margin:"7px 0",textDecoration:"none",fontWeight:"600",color:"blue"},to:"/forgotpassword",children:"Forgot Password?"}),e.jsx(j,{type:"submit",isLoading:r,children:"Login"})]})}),e.jsxs(M,{my:2,children:["Don't have an account?"," ",e.jsx(f,{to:"/signup",style:{textDecoration:"none",fontWeight:"600",color:"blue"},children:"Signup"})]})]})]}),e.jsx(N,{stacked:!0,position:"bottom-right",autoClose:2e3})]})};export{H as default};
